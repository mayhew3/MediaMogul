<div class="modal-header">
  <h1 ng-bind="ctrl.series.title"></h1>
</div>

<div class="modal-body clearfix">

    <div class="col-lg-2">
      <div class="row">
        <img class="img-rounded"
             ng-src="{{ctrl.tvdbPosterPath()}}"
             err-src="images/GenericSeries.gif"
             width="100%"
             ng-click="ctrl.openChangePoster()"/>
      </div>
      <div class="row" style="margin-top: 20px">
        Metacritic: <rating-box value="ctrl.series.metacritic"
                                max-value="100"></rating-box>
      </div>
      <div class="row" style="margin-top: 20px">
        Rating: <rating-box value="ctrl.series.group_score"
                                max-value="100"></rating-box>
      </div>
      <div class="row" style="margin-top: 20px" ng-show="ctrl.getOutstandingVoteCount() > 0">
        Votes Left: <span ng-bind="ctrl.getOutstandingVoteCount() + ' / ' + ctrl.group.members.length"></span>
      </div>
      <div class="row" style="margin-top: 20px" ng-show="ctrl.debugOn">
        Aired: <span ng-bind="ctrl.series.aired_episodes"></span><br><br>
        Unwatched: <span ng-bind="ctrl.series.unwatched_all"></span><br><br>
        First Unwatched: <span ng-bind="ctrl.series.first_unwatched"></span><br><br>
        Last Watched: <span ng-bind="ctrl.series.last_watched"></span><br><br>
        Midseason: <span ng-bind="ctrl.series.midSeason"></span><br><br>
        Date Added: <span ng-bind="ctrl.series.date_added"></span><br><br>
      </div>

      <div class="row" style="margin-top: 20px" ng-show="ctrl.LockService.isAdmin() && !ctrl.hasOpenBallot()">
        <input type="button"
               class="btn btn-success"
               ng-click="ctrl.addBallot()"
               value="Add Ballot">
      </div>

      <div class="row" style="margin-top: 20px" ng-show="ctrl.LockService.isAdmin()">
        <input type="button"
               class="btn btn-default"
               ng-click="ctrl.openEditSeries()"
               value="Edit">
      </div>

    </div>

    <div class="col-lg-9">
      <div id="seasonFilter" class="col-lg-12" ng-show="ctrl.seasonLabels.length > 1">
        <div class="btn-group" role="group" id="seasons">
          <button type="button"
                  ng-repeat="season in ctrl.seasonLabels"
                  ng-class="ctrl.getSeasonButtonClass(season)"
                  ng-model="ctrl.selectedSeason"
                  ng-click="ctrl.refreshTooltips()"
                  style="font-size: xx-large"
                  uib-btn-radio="season">
            {{season}}
          </button>
        </div>
      </div>

      <div class="col-lg-12">
        <table class="table table-striped table-hover">
          <thead>
          <tr>
            <th>Ep</th>
            <th>Title</th>
            <th>Date</th>
            <th>Watched</th>
          </tr>
          </thead>
          <tr data-ng-repeat="episode in ctrl.episodes |
                          filter:ctrl.episodeFilter |
                          orderBy:['absolute_number']"
              ng-click="ctrl.openEpisodeDetail(episode)"
              ng-class="ctrl.rowClass(episode)">
            <td ng-bind="episode.episode_number"></td>
            <td ng-bind="episode.title" class="episodeDescription"></td>
            <td ng-bind="episode.air_time|date:ctrl.getDateFormat(episode.air_time):'America/Los_Angeles'"></td>
            <td ng-class="ctrl.getTooltipClass(episode)"
                title="{{ctrl.getTooltipText(episode)}}">
              <span ng-bind="ctrl.getWatchedDateOrWatched(episode)"
                    ng-show="episode.watched || episode.skipped"></span>

              <!-- ME label -->
              <span class="label label-info"
                    ng-show="ctrl.showMeLabel(episode)">
                Me
              </span>

              <!-- SOME label -->
              <span class="label label-warning"
                    ng-show="ctrl.showSomeLabel(episode)"
                    ng-bind="ctrl.getPersonWatchedLabel(episode)"></span>

              <!-- ALL label -->
              <span class="label label-danger"
                    ng-show="ctrl.showAllLabel(episode)">
                All
              </span>

            </td>
          </tr>
        </table>
      </div>
    </div>

  </div>


<div class="modal-footer">
  <button class="btn btn-primary" ng-click="ctrl.ok()">Close</button>
</div>
