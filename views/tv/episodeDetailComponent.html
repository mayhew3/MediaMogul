<div ng-if="ctrl.episode">

  <div class="col-md-8 col-sm-12 col-xs-12">

    <!-- Episode Number -->
    <div class="row">
      <div class="col-lg-12">
        <h4>
          <span>Season</span>
          <strong><span ng-bind="ctrl.episode.season"></span></strong>
          <span> - Episode</span>
          <strong><span ng-bind="ctrl.episode.episode_number"></span></strong>
        </h4>
      </div>
    </div>

    <!-- Title -->
    <div class="row">
      <div class="col-lg-12">
        <span style="margin-top: 0; font-size: 24pt; font-weight: bold" ng-bind="ctrl.episode.title"></span>
      </div>
    </div>

    <!-- Air Date -->

    <div class="row seriesDetailElement" ng-show="!ctrl.LockService.isAdmin()" style="margin-top: 15px">
      <div class="col-lg-12">
        Aired: <span ng-bind="ctrl.getAirDate()"></span>
      </div>
    </div>

    <!-- Episode Summary -->
    <div class="row seriesDetailElement">
      <div class="col-lg-12">
        <span ng-bind="ctrl.episode.tvdb_overview"></span>
      </div>
    </div>

    <div class="alert alert-success"
         ng-if="ctrl.hasPreviousUnwatched() && !ctrl.isWatched()">{{ctrl.previousUnwatchedCount()}} previous episodes are unwatched.</div>

    <div class="alert alert-info"
         ng-if="ctrl.isUnaired()">Episode airs {{ctrl.airedFromNow()}}.</div>

    <div class="row" ng-if="ctrl.isInViewerCollection()">
      <div class="col-lg-12 col-sm-6">
        <div class="watchedButton">

          <div class="seriesDetailElement">
            <!-- Mark Watched -->
            <checkmark-button get-label="ctrl.getWatchButtonLabel"
                              button-class="ctrl.getWatchButtonClass"
                              button-is-toggled="ctrl.isWatched"
                              on-click="ctrl.toggleWatched"
                              ng-disabled="ctrl.isUpdating()"></checkmark-button>
          </div>


          <!-- Watched Date Input-->
          <div ng-if="!ctrl.isWatchedOrSkipped()"
               class="seriesDetailElement">
            <p class="input-group">
              <span class="input-group-addon" id="basic-addon1">On</span>
              <input type="text"
                     id="watchedDateInput"
                     class="form-control"
                     uib-datepicker-popup="{{'dd-MMMM-yyyy'}}"
                     ng-model="ctrl.watchedDate"
                     is-open="ctrl.popup.opened"
                     datepicker-options="ctrl.dateOptions"
                     ng-required="false"
                     close-text="Close"
                     alt-input-formats="ctrl.altInputFormats" />
              <span class="input-group-btn">
                <button type="button"
                        class="btn btn-default"
                        ng-click="ctrl.open()"><i class="glyphicon glyphicon-calendar"></i></button>
              </span>
            </p>

            <div class="text-right"
                 ng-if="ctrl.hasPreviousUnwatched() && !!ctrl.watchedDate">
              (This episode only.)
            </div>
          </div>

          <!-- Watched Date Readonly -->
          <div class="seriesDetailElement"
               ng-if="ctrl.isWatched() && ctrl.hasWatchedDate()">
            On {{ctrl.getWatchedDateForDisplay()}}
          </div>

          <!-- Rating -->
          <div ng-if="!ctrl.isInGroupMode()">
            <p class="input-group">
              <span class="input-group-addon">Rating</span>
              <input type="number"
                     class="form-control"
                     id="ratingValue"
                     name="ratingValue"
                     min="1"
                     max="100"
                     ng-class="ctrl.ratingInputClass()"
                     ng-model="ctrl.rating_value"/>
              <span ng-if="ctrl.hasMyRating() && ctrl.ratingIsChanged()"
                  class="input-group-btn">
                <button type="button"
                        class="btn btn-default"
                        ng-disabled="ctrl.updating"
                        ng-click="ctrl.updateMyRating()">Update</button>
              </span>
            </p>

          </div>


          <!-- Mark Skipped -->
          <div class="seriesDetailElement" ng-if="ctrl.isInGroupMode()">
            <checkmark-button get-label="ctrl.getSkipButtonLabel"
                              button-class="ctrl.getSkipButtonClass"
                              button-is-toggled="ctrl.isSkipped"
                              on-click="ctrl.toggleSkipped"
                              ng-disabled="ctrl.isUpdating()"></checkmark-button>
          </div>

        </div>
      </div>
    </div>


  </div>

  <div class="col-md-4 col-sm-5 col-xs-12 seriesDetailElement">
    <img class="img-rounded"
         ng-if="ctrl.showEpisodeImage()"
         ng-src="{{ctrl.getEpisodeImage()}}"
         width="100%"
         alt="episode image"/>
  </div>

</div>
